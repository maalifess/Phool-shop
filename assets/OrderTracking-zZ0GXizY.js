import{c as I,r as c,j as e}from"./index-DCxYXjvm.js";import{L as D,S as P,B as L}from"./Layout-BM3OMrdC.js";import{C as O,a as _}from"./card-B7vmFDq_.js";import{I as T}from"./input-BzkMdtlL.js";import{s as B}from"./supabaseOrders-CaW21oQc.js";import{O as E}from"./OrderStatusBadge-B6bTmMyD.js";import{m as j}from"./proxy-BLmNRCnd.js";import{P as d,C as K}from"./package-CBIAVqbc.js";import{C as R}from"./check-KfvcG8B0.js";import{C as q}from"./copy-We9Owz8N.js";import{C as y}from"./circle-check-DOvHgwVa.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=I("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),i=[{key:"Under Process",label:"Order Placed",icon:d},{key:"Confirmed",label:"Confirmed",icon:y},{key:"Dispatched",label:"Dispatched",icon:d},{key:"Completed",label:"Delivered",icon:y}],J=()=>{const[o,g]=c.useState(""),[m,b]=c.useState([]),[x,v]=c.useState(!1),[r,u]=c.useState(!1),[w,h]=c.useState(null),p=async()=>{const t=o.trim();if(!t)return;u(!0);const a=await B(t);b(a),v(!0),u(!1)},C=async t=>{try{await navigator.clipboard.writeText(t),h(t),setTimeout(()=>h(null),2e3)}catch{}},S=t=>{const a=i.findIndex(l=>l.key===t);return a>=0?a:0};return e.jsx(D,{children:e.jsx("section",{className:"py-16 md:py-24",children:e.jsxs("div",{className:"container max-w-3xl",children:[e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[e.jsx(d,{className:"mx-auto h-10 w-10 text-primary"}),e.jsx("h1",{className:"mt-4 font-display text-4xl font-bold text-foreground md:text-5xl",children:"Track Your Orders"}),e.jsx("p",{className:"mx-auto mt-4 max-w-md text-muted-foreground",children:"View your order history and track status."})]}),e.jsx("div",{className:"mx-auto mt-8 max-w-md",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(P,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(T,{value:o,onChange:t=>g(t.target.value),onKeyDown:t=>t.key==="Enter"&&p(),placeholder:"Enter your Order ID (e.g. PS-M3K7X2-AB2C)",className:"pl-10 rounded-full"})]}),e.jsx(L,{onClick:p,className:"rounded-full",disabled:r,children:r?e.jsx(N,{className:"h-4 w-4 animate-spin"}):"Search"})]})}),e.jsxs("div",{className:"mt-10 space-y-6",children:[r&&e.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[e.jsx(N,{className:"mx-auto h-8 w-8 animate-spin mb-4"}),e.jsx("p",{children:"Searching..."})]}),!r&&x&&m.length===0&&e.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[e.jsx(K,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No orders found for that ID."})]}),!r&&!x&&e.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[e.jsx(d,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"Enter your Order ID above to track your order."})]}),!r&&m.map(t=>{const a=S(t.status),l=t.items||[];return e.jsx(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsx(O,{className:"border-border/40",children:e.jsxs(_,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm font-bold text-foreground",children:t.order_id}),e.jsx("button",{onClick:()=>C(t.order_id),className:"rounded p-1 hover:bg-muted transition-colors",children:w===t.order_id?e.jsx(R,{className:"h-3.5 w-3.5 text-green-500"}):e.jsx(q,{className:"h-3.5 w-3.5 text-muted-foreground"})})]}),e.jsxs("p",{className:"mt-1 text-sm text-muted-foreground",children:[new Date(t.created_at||"").toLocaleDateString()," at ",new Date(t.created_at||"").toLocaleTimeString()]}),t.name&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placed by: ",t.name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"flex items-center justify-end gap-2 mb-2",children:e.jsx(E,{status:t.status})}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:["PKR ",t.total]}),Number(t.discount)>0&&e.jsxs("p",{className:"text-xs text-green-600",children:["Saved PKR ",t.discount]}),t.gift_wrap&&e.jsx("p",{className:"text-xs text-muted-foreground flex items-center justify-end gap-1",children:e.jsx("span",{children:"Gift wrapped"})})]})]}),l.length>0&&e.jsx("div",{className:"mt-4 space-y-1",children:l.map((s,n)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[s.quantity,"x ",s.name]}),e.jsxs("span",{children:["PKR ",s.price*s.quantity]})]},n))}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:i.map((s,n)=>{const f=n<=a,k=s.icon;return e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${f?"bg-primary text-white":"bg-muted text-muted-foreground"} transition-colors`,children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx("span",{className:`mt-2 text-xs font-medium ${f?"text-primary":"text-muted-foreground"}`,children:s.label})]},s.key)})}),e.jsx("div",{className:"mt-1 flex",children:i.slice(0,-1).map((s,n)=>e.jsx("div",{className:`flex-1 h-0.5 mx-4 rounded ${n<a?"bg-primary":"bg-muted"}`},n))})]}),t.status==="Cancelled"&&e.jsx("div",{className:"mt-4 rounded-lg bg-red-50 border border-red-200 p-3 text-sm text-red-700 text-center font-medium",children:"This order has been cancelled."})]})})},t.order_id)})]})]})})})};export{J as default};
