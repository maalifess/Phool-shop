import{j as s,d as Ke,e as Me,g as Te,r as d}from"./index-BpkvZjkd.js";import{l as We,a as Ge,L as Je,B as m,d as ze,u as qe,e as He,f as Qe,g as Xe,h as Ye}from"./Layout-CUxFosHG.js";import{I as o}from"./input-CSa8fneR.js";import{S as he,a as je,b as fe,c as ve,d as w,T as E}from"./select-Cu7sqGBd.js";import{C as D,b as F,c as R,a as U}from"./card-BCNS5OHr.js";import{g as Ze}from"./supabaseAuth-Bv4QqHWN.js";import{l as es,c as ss,u as ts,d as as}from"./supabaseFundraisers-CfOp-jV5.js";import{a as Ne,d as rs}from"./supabaseReviews-DRyAJ3jP.js";import"./check-D52SzsAh.js";const ns=Me("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function k({className:B,variant:h,...v}){return s.jsx("div",{className:Ke(ns({variant:h}),B),...v})}const ps=()=>{const B=Te(),[h,v]=d.useState([]),[K,O]=d.useState([]),[be,A]=d.useState([]),[q,M]=d.useState([]),[ye,Ce]=d.useState(150),[N,b]=d.useState(null),[I,L]=d.useState(""),[H,Q]=d.useState(200),[X,Y]=d.useState(""),[T,W]=d.useState(""),[Z,ee]=d.useState(""),[se,te]=d.useState(""),[ae,re]=d.useState(0),[ne,de]=d.useState(""),[ie,ce]=d.useState(""),[V,le]=d.useState(""),[oe,G]=d.useState(""),[me,y]=d.useState("add_products"),[g,J]=d.useState([]),[$,ue]=d.useState("timestamp"),[S,xe]=d.useState("desc");d.useEffect(()=>{(async()=>{if(!await Ze()){B("/admin-login");return}const[t,a,r,n]=await Promise.all([We(),Ge(),es(),Ne()]);v(t),A(a),O(r),M(n),y("add_products");const u=[];try{const c=localStorage.getItem("phool_orders");if(c){const l=JSON.parse(c);for(const i of l)u.push({id:i.id||void 0,timestamp:i.date||new Date().toISOString(),name:i.name||"",products:i.items?i.items.map(x=>`${x.quantity}x ${x.name} (PKR ${x.price})`).join(", "):"",status:i.status==="pending"?"Under Process":i.status||"Under Process",items:i.items,subtotal:i.subtotal,discount:i.discount,giftWrap:i.giftWrap,giftWrapCost:i.giftWrapCost,total:i.total,promo:i.promo,date:i.date,orderType:"regular"})}}catch{}try{const c=localStorage.getItem("phool_orders_backup");if(c){const l=JSON.parse(c);for(const i of l)u.some(pe=>pe.timestamp===i.timestamp&&pe.name===i.name)||u.push(i)}}catch{}J(u)})()},[B]);const C=e=>{if(Array.isArray(e))return e.filter(Boolean).map(String);if(typeof e=="string"){const t=e.trim();if(!t)return[];try{const a=JSON.parse(t);if(Array.isArray(a))return a.filter(Boolean).map(String)}catch{}return t.split(",").map(a=>a.trim()).filter(Boolean)}return[]},we=async()=>{const t=await ze({name:I||"New Product",price:10,category:"Uncategorized",images:[],description:"",in_stock:!0,is_custom:!1});t&&(v(a=>[...a,t]),L(""),b(t.id))},j=async(e,t)=>{const a=await qe(e,t);a&&v(r=>r.map(n=>n.id===e?a:n))},ke=async e=>{await He(e)&&v(a=>a.filter(r=>r.id!==e))},Se=async()=>{const t=await Qe({name:I||"Card",price:H,category:"Cards",images:T?[T]:["ðŸªª"],description:X,in_stock:!0,is_custom:!0});t&&(A(a=>[...a,t]),L(""),Q(200),Y(""),W(""),b(t.id))},_=async(e,t)=>{const a=await Xe(e,t);a&&A(r=>r.map(n=>n.id===e?a:n))},_e=async e=>{await Ye(e)&&A(a=>a.filter(r=>r.id!==e))},Pe=async()=>{const e=Number(ae)||0,t={title:Z||"New Fundraiser",description:se||"",goal:`PKR ${e}`,goal_pkr:e,start_date:ne||void 0,end_date:ie||void 0,product_id:typeof V=="number"?V:void 0,image:oe||void 0,active:!0},a=await ss(t);a&&(O(r=>[...r,a]),ee(""),te(""),re(0),de(""),ce(""),le(""),G(""),b(a.id))},f=async(e,t)=>{const a=await ts(e,t);a&&O(r=>r.map(n=>n.id===e?a:n))},De=async e=>{await as(e)&&O(a=>a.filter(r=>r.id!==e))},Fe=async e=>{await rs(e)&&M(a=>a.filter(r=>r.id!==e))},Re=async()=>{const e=await Ne();M(e)},Ue=e=>{switch(e){case"Completed":return"bg-emerald-500/15 text-emerald-700 border-emerald-500/30";case"Dispatched":return"bg-sky-500/15 text-sky-700 border-sky-500/30";case"Cancelled":return"bg-rose-500/15 text-rose-700 border-rose-500/30";case"Under Process":default:return"bg-amber-500/15 text-amber-800 border-amber-500/30"}},Be="bg-violet-500/15 text-violet-700 border-violet-500/30",Oe="bg-emerald-500/15 text-emerald-700 border-emerald-500/30",p=d.useCallback(e=>`${e.timestamp??""}-${e.email??""}-${e.phone??""}-${e.products??""}`,[]),ge=e=>{try{const t=e.filter(r=>r.id).map(r=>({id:r.id,items:r.items||[],subtotal:r.subtotal||0,discount:r.discount||0,giftWrap:r.giftWrap||!1,giftWrapCost:r.giftWrapCost||0,total:r.total||0,promo:r.promo||null,date:r.date||r.timestamp,status:r.status==="Under Process"?"pending":r.status==="Dispatched"?"shipped":r.status==="Completed"?"delivered":r.status==="Cancelled"?"cancelled":"pending",name:r.name||""}));localStorage.setItem("phool_orders",JSON.stringify(t));const a=e.filter(r=>!r.id);a.length>0&&localStorage.setItem("phool_orders_backup",JSON.stringify(a))}catch{}},Ae=d.useCallback((e,t)=>{J(a=>{const r=a.map(n=>p(n)!==e?n:{...n,status:t});return ge(r),r})},[p]),Ie=d.useCallback(e=>{confirm("Delete this order? This action cannot be undone.")&&J(t=>{const a=t.filter(r=>p(r)!==e);return ge(a),a})},[p]),Le=d.useMemo(()=>{const e={"Under Process":0,Dispatched:0,Completed:0,Cancelled:0};for(const t of g){const a=t.status||"Under Process";e[a]+=1}return e},[g]),P=e=>me===e?"default":"outline",Ve=d.useMemo(()=>{const e=[...g];if($==="timestamp")e.sort((t,a)=>{const r=new Date(t.timestamp||0).getTime(),n=new Date(a.timestamp||0).getTime();return S==="desc"?n-r:r-n});else if($==="status"){const t={"Under Process":0,Dispatched:1,Completed:2,Cancelled:3};e.sort((a,r)=>{const n=t[a.status||"Under Process"],u=t[r.status||"Under Process"];return S==="desc"?u-n:n-u})}return e},[g,$,S]),$e=()=>{ue("timestamp"),xe("desc")},z=d.useMemo(()=>{const e=new Set;for(const t of K){if(!t.product_id)continue;const a=h.find(r=>r.id===t.product_id);a&&e.add(a.name.toLowerCase())}return e},[K,h]);d.useMemo(()=>{const e=new Map;for(let t=0;t<g.length;t++)e.set(p(g[t]),t);return e},[g,p]);const Ee=d.useMemo(()=>{const e=new Set;if(z.size===0)return e;for(const t of g){if(!t.products)continue;t.products.split(",").map(n=>n.trim().toLowerCase()).some(n=>z.has(n))&&e.add(p(t))}return e},[g,z,p]);return s.jsx(Je,{children:s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"container",children:[s.jsx("h1",{className:"font-display text-2xl font-bold",children:"Admin Dashboard"}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[s.jsx(m,{variant:P("add_products"),onClick:()=>y("add_products"),children:"Add Products"}),s.jsx(m,{variant:P("add_cards"),onClick:()=>y("add_cards"),children:"Add Cards"}),s.jsx(m,{variant:P("add_fundraiser"),onClick:()=>y("add_fundraiser"),children:"Add Fundraiser"}),s.jsx(m,{variant:P("review_management"),onClick:()=>y("review_management"),children:"Review Management"}),s.jsx(m,{variant:P("order_management"),onClick:()=>y("order_management"),children:"Order Management"})]}),s.jsx("div",{className:"mt-8",children:(()=>{switch(me){case"add_products":return s.jsxs(D,{className:"border-border/40",children:[s.jsx(F,{children:s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsx(R,{className:"font-display",children:"Add Products"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o,{placeholder:"New product name",value:I,onChange:e=>L(e.target.value)}),s.jsx(m,{onClick:we,children:"Add"})]})]})}),s.jsx(U,{children:s.jsx("div",{className:"space-y-3",children:h.map(e=>s.jsxs("div",{className:"rounded border border-border/40 p-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",e.id," â€¢ ",e.category]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(m,{variant:"outline",onClick:()=>b(N===e.id?null:e.id),children:"Edit"}),s.jsx(m,{variant:"destructive",onClick:()=>ke(e.id),children:"Delete"})]})]}),N===e.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(o,{defaultValue:e.name,onBlur:t=>{const a=t.target.value;a!==e.name&&j(e.id,{name:a})}}),s.jsx(o,{type:"number",defaultValue:String(e.price),onBlur:t=>{const a=Number(t.target.value);!Number.isNaN(a)&&a!==e.price&&j(e.id,{price:a})}}),s.jsx(o,{defaultValue:e.category,onBlur:t=>{const a=t.target.value;a!==e.category&&j(e.id,{category:a})}}),s.jsx(o,{defaultValue:C(e.images).join(","),onBlur:t=>{const a=t.target.value.split(",").map(n=>n.trim()).filter(Boolean),r=C(e.images);t.target.value!==r.join(",")&&j(e.id,{images:a})}}),s.jsxs("div",{className:"mt-2",children:[s.jsx("label",{className:"text-sm",children:"Upload images"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async t=>{const a=t.target.files;if(!a)return;const r=c=>new Promise((l,i)=>{const x=new FileReader;x.onload=()=>l(String(x.result)),x.onerror=i,x.readAsDataURL(c)}),n=[];for(let c=0;c<a.length;c++)try{n.push(await r(a[c]))}catch(l){console.error(l)}const u=C(e.images);j(e.id,{images:[...u,...n]})}})]}),s.jsx(E,{defaultValue:e.description,onBlur:t=>{const a=t.target.value;a!==e.description&&j(e.id,{description:a})}}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm",children:"In stock"}),s.jsx("input",{type:"checkbox",checked:e.in_stock,onChange:t=>j(e.id,{in_stock:t.target.checked})})]})})]})]},e.id))})})]});case"add_cards":return s.jsxs(D,{className:"border-border/40",children:[s.jsx(F,{children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx(R,{className:"font-display",children:"Add Cards"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsx(o,{placeholder:"Card name",value:I,onChange:e=>L(e.target.value)}),s.jsx(o,{type:"number",placeholder:"Price",value:H,onChange:e=>Q(Number(e.target.value)||0)})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsx(o,{placeholder:"Image URL (optional)",value:T,onChange:e=>W(e.target.value)}),s.jsx(m,{onClick:Se,children:"Add Card"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm font-medium",children:"Or upload image:"}),s.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{var a;const t=(a=e.target.files)==null?void 0:a[0];if(t){const r=n=>new Promise((u,c)=>{const l=new FileReader;l.onload=()=>u(String(l.result)),l.onerror=c,l.readAsDataURL(n)});try{const n=await r(t);W(n)}catch(n){console.error("Error reading file:",n)}}}})]}),s.jsx(E,{placeholder:"Card description (optional)",value:X,onChange:e=>Y(e.target.value),rows:2})]})}),s.jsxs(U,{children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("label",{className:"text-sm",children:"Card message max chars"}),s.jsx(o,{type:"number",value:String(ye),onChange:e=>Ce(Number(e.target.value)||0)})]}),s.jsx("div",{className:"mt-4 space-y-3",children:be.map(e=>s.jsxs("div",{className:"rounded border border-border/40 p-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",e.id," â€¢ ",e.category]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(m,{variant:"outline",onClick:()=>b(N===e.id?null:e.id),children:"Edit"}),s.jsx(m,{variant:"destructive",onClick:()=>_e(e.id),children:"Delete"})]})]}),N===e.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(o,{defaultValue:e.name,onBlur:t=>{const a=t.target.value;a!==e.name&&_(e.id,{name:a})}}),s.jsx(o,{type:"number",defaultValue:String(e.price),onBlur:t=>{const a=Number(t.target.value);!Number.isNaN(a)&&a!==e.price&&_(e.id,{price:a})}}),s.jsx(o,{defaultValue:C(e.images).join(","),onBlur:t=>{const a=t.target.value.split(",").map(n=>n.trim()).filter(Boolean),r=C(e.images);t.target.value!==r.join(",")&&_(e.id,{images:a})}}),s.jsxs("div",{className:"mt-2",children:[s.jsx("label",{className:"text-sm",children:"Upload images"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async t=>{const a=t.target.files;if(!a)return;const r=c=>new Promise((l,i)=>{const x=new FileReader;x.onload=()=>l(String(x.result)),x.onerror=i,x.readAsDataURL(c)}),n=[];for(let c=0;c<a.length;c++)try{n.push(await r(a[c]))}catch(l){console.error(l)}const u=C(e.images);_(e.id,{images:[...u,...n]})}})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm",children:"In stock"}),s.jsx("input",{type:"checkbox",defaultChecked:e.in_stock,onChange:t=>_(e.id,{in_stock:t.target.checked})})]})})]})]},e.id))})]})]});case"add_fundraiser":return s.jsxs(D,{className:"border-border/40",children:[s.jsx(F,{children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx(R,{className:"font-display",children:"Add Fundraiser"}),s.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Fundraiser Name"}),s.jsx(o,{placeholder:"Fundraiser name",value:Z,onChange:e=>ee(e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Goal (PKR)"}),s.jsx(o,{type:"number",placeholder:"Goal (PKR)",value:String(ae),onChange:e=>re(Number(e.target.value)||0)})]})]}),s.jsx(E,{placeholder:"Fundraiser description",value:se,onChange:e=>te(e.target.value),rows:2}),s.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Start Date"}),s.jsx(o,{type:"date",value:ne,onChange:e=>de(e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"End Date"}),s.jsx(o,{type:"date",value:ie,onChange:e=>ce(e.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Image URL (optional)"}),s.jsx(o,{placeholder:"Image URL (optional)",value:oe,onChange:e=>G(e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Or upload image"}),s.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{var a;const t=(a=e.target.files)==null?void 0:a[0];if(t){const r=n=>new Promise((u,c)=>{const l=new FileReader;l.onload=()=>u(String(l.result)),l.onerror=c,l.readAsDataURL(n)});try{const n=await r(t);G(n)}catch(n){console.error("Error reading file:",n)}}}})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[s.jsxs("select",{className:"h-10 w-full rounded-md border border-input bg-background px-3 text-sm",value:V===""?"":String(V),onChange:e=>le(e.target.value?Number(e.target.value):""),children:[s.jsx("option",{value:"",children:"No linked product"}),h.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]}),s.jsx(m,{onClick:Pe,children:"Add Fundraiser"})]})]})}),s.jsx(U,{children:s.jsx("div",{className:"space-y-3",children:K.map(e=>s.jsxs("div",{className:"rounded border border-border/40 p-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.title}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Goal: ",typeof e.goal_pkr=="number"?`PKR ${e.goal_pkr}`:e.goal,e.start_date&&s.jsxs("span",{children:[" â€¢ ",new Date(e.start_date).toLocaleDateString()]}),e.end_date&&s.jsxs("span",{children:[" - ",new Date(e.end_date).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(m,{variant:"outline",onClick:()=>b(N===e.id?null:e.id),children:"Edit"}),s.jsx(m,{variant:"destructive",onClick:()=>De(e.id),children:"Delete"})]})]}),N===e.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(o,{defaultValue:e.title,onBlur:t=>{const a=t.target.value;a!==e.title&&f(e.id,{title:a})}}),s.jsx(E,{defaultValue:e.description,onBlur:t=>{const a=t.target.value;a!==e.description&&f(e.id,{description:a})}}),s.jsx(o,{type:"number",defaultValue:String(typeof e.goal_pkr=="number"?e.goal_pkr:0),onBlur:t=>{const a=Number(t.target.value)||0;a!==(typeof e.goal_pkr=="number"?e.goal_pkr:0)&&f(e.id,{goal_pkr:a,goal:`PKR ${a}`})}}),s.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[s.jsx(o,{type:"date",defaultValue:e.start_date||"",onBlur:t=>{const a=t.target.value;a!==(e.start_date||"")&&f(e.id,{start_date:a||null})}}),s.jsx(o,{type:"date",defaultValue:e.end_date||"",onBlur:t=>{const a=t.target.value;a!==(e.end_date||"")&&f(e.id,{end_date:a||null})}})]}),s.jsxs("select",{className:"h-10 w-full rounded-md border border-input bg-background px-3 text-sm",defaultValue:typeof e.product_id=="number"?String(e.product_id):"",onChange:t=>{const a=t.target.value?Number(t.target.value):null;f(e.id,{product_id:a})},children:[s.jsx("option",{value:"",children:"No linked product"}),h.map(t=>s.jsx("option",{value:t.id,children:t.name},t.id))]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm",children:"Active"}),s.jsx("input",{type:"checkbox",defaultChecked:e.active,onChange:t=>f(e.id,{active:t.target.checked})})]})]})]},e.id))})})]});case"review_management":return s.jsxs(D,{className:"border-border/40",children:[s.jsx(F,{children:s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsx(R,{className:"font-display",children:"Review Management"}),s.jsx(m,{variant:"outline",onClick:Re,children:"Refresh"})]})}),s.jsx(U,{children:s.jsxs("div",{className:"space-y-3",children:[q.map(e=>s.jsx("div",{className:"rounded border border-border/40 p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Product ID: ",e.product_id," â€¢ Rating: ",e.rating,"/5"]}),s.jsx("div",{className:"mt-1 text-sm",children:e.comment})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(k,{className:"bg-emerald-500/15 text-emerald-700 border-emerald-500/30",children:"Published"}),s.jsx(m,{variant:"destructive",onClick:()=>Fe(e.id),children:"Delete"})]})]})},e.id)),q.length===0&&s.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No reviews yet"})]})})]});case"order_management":return s.jsxs(D,{className:"border-border/40",children:[s.jsxs(F,{children:[s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsx(R,{className:"font-display",children:"Order Management"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(he,{value:$,onValueChange:e=>ue(e),children:[s.jsx(je,{className:"w-32",children:s.jsx(fe,{})}),s.jsxs(ve,{children:[s.jsx(w,{value:"timestamp",children:"Date"}),s.jsx(w,{value:"status",children:"Status"})]})]}),s.jsx(m,{variant:"outline",onClick:()=>xe(S==="desc"?"asc":"desc"),children:S==="desc"?"â†“":"â†‘"}),s.jsx(m,{variant:"outline",onClick:$e,children:"Reset"})]})]}),s.jsx("div",{className:"flex gap-4",children:Object.entries(Le).map(([e,t])=>s.jsxs(k,{className:Ue(e),children:[e,": ",t]},e))})]}),s.jsx(U,{children:s.jsx("div",{className:"space-y-3",children:Ve.map(e=>{const t=p(e),a=Ee.has(t);return s.jsxs("div",{className:"rounded border border-border/40 p-3",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[s.jsxs("div",{children:[e.id&&s.jsx("div",{className:"font-mono text-xs font-bold text-primary mb-1",children:e.id}),s.jsx("div",{className:"font-medium",children:e.name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.email?`${e.email} â€¢ `:"",e.phone?`${e.phone} â€¢ `:"",new Date(e.timestamp||e.date||0).toLocaleString()]}),s.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[s.jsx(k,{className:e.orderType==="custom"?Be:Oe,children:e.orderType==="custom"?"Custom":"Regular"}),a&&s.jsx(k,{className:"bg-orange-500/15 text-orange-700 border-orange-500/30",children:"Fundraiser"}),e.giftWrap&&s.jsx(k,{className:"bg-pink-500/15 text-pink-700 border-pink-500/30",children:"Gift Wrapped"}),e.promo&&s.jsxs(k,{className:"bg-violet-500/15 text-violet-700 border-violet-500/30",children:["Promo: ",e.promo]}),typeof e.total=="number"&&s.jsxs("span",{className:"text-sm font-bold text-foreground",children:["PKR ",e.total]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(he,{value:e.status||"Under Process",onValueChange:r=>Ae(t,r),children:[s.jsx(je,{className:"w-32",children:s.jsx(fe,{})}),s.jsxs(ve,{children:[s.jsx(w,{value:"Under Process",children:"Under Process"}),s.jsx(w,{value:"Dispatched",children:"Dispatched"}),s.jsx(w,{value:"Completed",children:"Completed"}),s.jsx(w,{value:"Cancelled",children:"Cancelled"})]})]}),s.jsx(m,{variant:"destructive",onClick:()=>Ie(t),children:"Delete"})]})]}),s.jsxs("div",{className:"mt-2 text-sm space-y-0.5",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Products:"})," ",e.products]}),e.address&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Address:"})," ",e.address]}),e.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]}),e.customDescription&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Custom:"})," ",e.customDescription]}),typeof e.discount=="number"&&e.discount>0&&s.jsxs("div",{className:"text-green-600",children:[s.jsx("span",{className:"font-medium",children:"Discount:"})," PKR ",e.discount]})]})]},t)})})})]})}})()})]})})})};export{ps as default};
