import{r,j as t,L as b}from"./index-CeWcHCL9.js";import{L as w,B as d}from"./Layout-VZ1BJX_6.js";import{C,a as S}from"./card-CqIAZ2mx.js";import{l as k}from"./supabase-C5sOXNJb.js";import{l as L}from"./supabaseCards-Cl2hf8Ed.js";import{m}from"./proxy-DtSI08ns.js";import{S as P}from"./shopping-bag-DHeTK_vG.js";import"./supabaseClient-whyNr3HJ.js";import"./tslib.es6-CmEaCU22.js";const B={hidden:{opacity:0,y:20},visible:o=>({opacity:1,y:0,transition:{delay:o*.08,duration:.5,ease:"easeOut"}})},U=()=>{const[o,p]=r.useState("All"),[c,x]=r.useState("default"),[l,h]=r.useState([]),[n,g]=r.useState([]),[A,u]=r.useState(!0),j=e=>!e||e.trim()===""?!1:e.startsWith("data:image/")||e.startsWith("http://")||e.startsWith("https://"),y=r.useMemo(()=>{const e=new Set;for(const s of l)s.category.split(",").map(i=>i.trim()).filter(Boolean).forEach(i=>e.add(i));for(const s of n)e.add(s.category);return["All",...Array.from(e)]},[l,n]),f=r.useMemo(()=>{const e=[];for(const s of l)e.push(s);for(const s of n)e.push({...s,images:s.images});return e},[l,n]);r.useEffect(()=>{(async()=>{u(!0);const[e,s]=await Promise.all([k(),L()]);h(e),g(s),u(!1)})()},[]);const v=o==="All"?f:f.filter(e=>e.category.split(",").map(a=>a.trim()).filter(Boolean).includes(o)),N=(()=>{const e=[...v];return c==="price-asc"?e.sort((s,a)=>s.price-a.price):c==="price-desc"?e.sort((s,a)=>a.price-s.price):e})();return t.jsx(w,{children:t.jsx("section",{className:"py-16 md:py-24",children:t.jsxs("div",{className:"container",children:[t.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[t.jsx("h1",{className:"font-display text-4xl font-bold text-foreground md:text-5xl",children:"Our Catalog"}),t.jsx("p",{className:"mx-auto mt-4 max-w-lg text-muted-foreground",children:"Browse our handcrafted collection — each piece made with care."})]}),t.jsxs("div",{className:"mt-10 flex flex-wrap items-center justify-center gap-3",children:[y.map(e=>t.jsx(d,{variant:o===e?"default":"outline",size:"sm",className:"rounded-full",onClick:()=>p(e),children:e},e)),t.jsxs("select",{value:c,onChange:e=>x(e.target.value),className:"ml-2 rounded-md border bg-background px-3 py-2 text-sm",children:[t.jsx("option",{value:"default",children:"Sort"}),t.jsx("option",{value:"price-asc",children:"Price: Low → High"}),t.jsx("option",{value:"price-desc",children:"Price: High → Low"})]})]}),t.jsx(m.div,{initial:"hidden",animate:"visible",className:"mt-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:N.map((e,s)=>t.jsx(m.div,{variants:B,custom:s,children:t.jsx(C,{className:"group h-full border-border/40 transition-all duration-300 hover:-translate-y-1 hover:shadow-lg",children:t.jsxs(S,{className:"flex h-full flex-col p-6 text-center",children:[t.jsxs("div",{className:"relative mx-auto aspect-square w-full overflow-hidden rounded-2xl border border-border/40",children:[(()=>{const a=e.images.find(i=>(i||"").trim()!=="")||"";return j(a)?t.jsx("img",{src:a,alt:e.name,className:"absolute inset-0 h-full w-full object-cover",loading:"lazy"}):t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-accent text-sm text-muted-foreground",children:"No image"})})(),t.jsx("div",{className:"absolute inset-0 translate-y-full bg-pink-500/20 transition-transform duration-300 ease-out group-hover:translate-y-0"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-200 group-hover:opacity-100",children:e.in_stock?t.jsx(d,{asChild:!0,size:"sm",className:"rounded-full",children:t.jsxs(b,{to:`/product/${e.id}`,children:[t.jsx(P,{className:"mr-2 h-4 w-4"})," View"]})}):t.jsx(d,{size:"sm",disabled:!0,className:"rounded-full",children:"Out of Stock"})})]}),t.jsxs("div",{className:"mt-4 flex items-end justify-between gap-3 text-left",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"font-display text-sm font-semibold text-foreground line-clamp-1",children:e.name}),t.jsx("div",{className:"mt-0.5 flex flex-wrap gap-1",children:e.category.split(",").map((a,i)=>t.jsx("span",{className:"inline-block rounded-full bg-muted px-2 py-0.5 text-xs text-muted-foreground",children:a.trim()},i))})]}),t.jsxs("div",{className:"shrink-0 text-lg font-medium text-primary",children:["PKR ",e.price]})]})]})})},e.id))},o)]})})})};export{U as default};
