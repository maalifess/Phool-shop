import{r as d,j as m,P as h,d as S,e as f}from"./index-DCxYXjvm.js";var y="Label",u=d.forwardRef((e,s)=>m.jsx(h.label,{...e,ref:s,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));u.displayName=y;var p=u;const O=f("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_=d.forwardRef(({className:e,...s},t)=>m.jsx(p,{ref:t,className:S(O(),e),...s}));_.displayName=p.displayName;const g={_origin:"https://api.emailjs.com"},b=(e,s,t)=>{if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!s)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class c{constructor(s){this.status=s?s.status:0,this.text=s?s.responseText:"Network Error"}}const w=(e,s,t={})=>new Promise((n,a)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:r})=>{const i=new c(r);i.status===200||i.text==="OK"?n(i):a(i)}),o.addEventListener("error",({target:r})=>{a(new c(r))}),o.open("POST",g._origin+e,!0),Object.keys(t).forEach(r=>{o.setRequestHeader(r,t[r])}),o.send(s)}),I=(e,s,t,n)=>{const a=n||g._userID;return b(a,e,s),w("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:a,service_id:e,template_id:s,template_params:t}),{"Content-type":"application/json"})},l="https://script.google.com/macros/s/YOUR_PRODUCTION_SCRIPT_ID/exec",P=async e=>{var s,t,n;try{console.log("ğŸš€ Starting Google Sheets submission..."),console.log("ğŸ“‹ Order data:",e),console.log("ğŸ”— API URL:",l);const o={timestamp:new Date().toISOString(),orderType:e.orderType,name:e.name,email:e.email,phone:e.phone,address:e.address||"",products:e.products,quantity:e.quantity,paymentMethod:e.paymentMethod||"",notes:e.notes||"",status:e.status||"Under Process",customDescription:((s=e.customDetails)==null?void 0:s.description)||"",customColors:((t=e.customDetails)==null?void 0:t.colors)||"",customTimeline:((n=e.customDetails)==null?void 0:n.timeline)||""};console.log("ğŸ“¤ Row data prepared:",o);const r=JSON.parse(localStorage.getItem("phool_orders_backup")||"[]");if(r.push(o),localStorage.setItem("phool_orders_backup",JSON.stringify(r)),console.log("ğŸ’¾ Data saved to localStorage as backup"),l!=="https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec"){console.log("ğŸŒ Sending to Google Sheets...");try{const i=await fetch(l,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});console.log("ğŸ“¡ Request sent (no-cors mode)"),console.log("âœ… Google Sheets request completed (response unreadable due to CORS)")}catch(i){return console.warn("âŒ Google Sheets fetch failed:",i),console.warn("ğŸ“Š Data saved locally instead"),!1}}return console.log("ğŸ‰ Order data saved successfully"),!0}catch(a){console.error("ğŸ’¥ Error adding order to Google Sheet:",a);const o=JSON.parse(localStorage.getItem("phool_orders_backup")||"[]");return o.push({...e,timestamp:new Date().toISOString(),status:e.status||"Under Process",error:"Failed to sync to Google Sheets"}),localStorage.setItem("phool_orders_backup",JSON.stringify(o)),!1}};export{_ as L,P as a,I as s};
