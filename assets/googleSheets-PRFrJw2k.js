import{r as d,j as u,P as S,d as h,e as f}from"./index-ClCyZbdN.js";var O="Label",m=d.forwardRef((e,s)=>u.jsx(S.label,{...e,ref:s,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));m.displayName=O;var p=m;const E=f("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_=d.forwardRef(({className:e,...s},t)=>u.jsx(p,{ref:t,className:h(E(),e),...s}));_.displayName=p.displayName;const g={_origin:"https://api.emailjs.com"},y=(e,s,t)=>{if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!s)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class c{constructor(s){this.status=s?s.status:0,this.text=s?s.responseText:"Network Error"}}const b=(e,s,t={})=>new Promise((n,r)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:a})=>{const i=new c(a);i.status===200||i.text==="OK"?n(i):r(i)}),o.addEventListener("error",({target:a})=>{r(new c(a))}),o.open("POST",g._origin+e,!0),Object.keys(t).forEach(a=>{o.setRequestHeader(a,t[a])}),o.send(s)}),T=(e,s,t,n)=>{const r=n||g._userID;return y(r,e,s),b("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:r,service_id:e,template_id:s,template_params:t}),{"Content-type":"application/json"})},l="https://script.google.com/macros/s/AKfycbzrvUvaSjEG7BlsVl-Ht4MSPHEJrDfDzZLCGQ28fxn6nnK54cOWsLKKcpALKuBAtIVD/exec",G=async e=>{var s,t,n;try{console.log("ğŸš€ Starting Google Sheets submission..."),console.log("ğŸ“‹ Order data:",e),console.log("ğŸ”— API URL:",l);const o={timestamp:new Date().toISOString(),orderType:e.orderType,name:e.name,email:e.email,phone:e.phone,address:e.address||"",products:e.products,quantity:e.quantity,paymentMethod:e.paymentMethod||"",notes:e.notes||"",status:e.status||"Under Process",customDescription:((s=e.customDetails)==null?void 0:s.description)||"",customColors:((t=e.customDetails)==null?void 0:t.colors)||"",customTimeline:((n=e.customDetails)==null?void 0:n.timeline)||""};console.log("ğŸ“¤ Row data prepared:",o);const a=JSON.parse(localStorage.getItem("phool_orders_backup")||"[]");if(a.push(o),localStorage.setItem("phool_orders_backup",JSON.stringify(a)),console.log("ğŸ’¾ Data saved to localStorage as backup"),!l||l.includes("YOUR_SCRIPT_ID"))return console.error("âŒ GOOGLE SHEETS NOT CONFIGURED: VITE_GOOGLE_SHEETS_URL is missing or contains placeholder value"),console.error("ğŸ“Š Order saved to localStorage only. To fix: set VITE_GOOGLE_SHEETS_URL in .env and rebuild"),!0;console.log("ğŸŒ Sending to Google Sheets...");try{const i=await fetch(l,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});console.log("ğŸ“¡ Request sent (no-cors mode)"),console.log("âœ… Google Sheets request completed (response unreadable due to CORS)")}catch(i){return console.warn("âŒ Google Sheets fetch failed:",i),console.warn("ğŸ“Š Data saved locally instead"),!1}return console.log("ğŸ‰ Order data saved successfully"),!0}catch(r){console.error("ğŸ’¥ Error adding order to Google Sheet:",r);const o=JSON.parse(localStorage.getItem("phool_orders_backup")||"[]");return o.push({...e,timestamp:new Date().toISOString(),status:e.status||"Under Process",error:"Failed to sync to Google Sheets"}),localStorage.setItem("phool_orders_backup",JSON.stringify(o)),!1}};export{_ as L,G as a,T as s};
