import{c as u,r as s,j as t,L as l}from"./index-CwopmQgp.js";import{l as p,L as h,H as y,B as i}from"./Layout-uZjc8LNC.js";import{C as g,a as j}from"./card-B-Jd-W3I.js";import{l as v}from"./supabaseFundraisers-BeEaONJI.js";import{m as c}from"./proxy-CYY-kGbK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=u("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),N={hidden:{opacity:0,y:20},visible:r=>({opacity:1,y:0,transition:{delay:r*.1,duration:.5,ease:"easeOut"}})},L=()=>{const[r,o]=s.useState([]),[n,m]=s.useState([]);s.useEffect(()=>{(async()=>{const[e,a]=await Promise.all([v(),p()]);o(e),m(a)})()},[]);const d=s.useMemo(()=>{const e=new Map;for(const a of n)e.set(a.id,a.name);return e},[n]);return t.jsx(h,{children:t.jsx("section",{className:"py-16 md:py-24",children:t.jsxs("div",{className:"container max-w-3xl",children:[t.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[t.jsx(y,{className:"mx-auto h-10 w-10 text-primary"}),t.jsx("h1",{className:"mt-4 font-display text-4xl font-bold text-foreground md:text-5xl",children:"Fundraisers"}),t.jsx("p",{className:"mx-auto mt-4 max-w-lg text-muted-foreground",children:"We use our craft to give back. Check out our active campaigns and past initiatives."})]}),t.jsx(c.div,{initial:"hidden",animate:"visible",className:"mt-14 space-y-6",children:r.sort((e,a)=>{if(e.active!==a.active)return a.active?1:-1;const x=e.created_at?new Date(e.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-x}).map((e,a)=>t.jsx(c.div,{variants:N,custom:a,children:t.jsx(g,{className:`border-border/40 ${e.active?"":"opacity-70"}`,children:t.jsxs(j,{className:`flex gap-6 p-6 ${e.active?"":"blur-[0.6px]"}`,children:[t.jsx("div",{className:"flex h-16 w-16 shrink-0 items-center justify-center rounded-2xl bg-accent text-3xl overflow-hidden",children:e.image?t.jsx("img",{src:e.image,alt:e.title,className:"h-full w-full object-cover",loading:"lazy"}):"üéóÔ∏è"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-display text-lg font-semibold text-foreground",children:e.title}),e.active&&t.jsx("span",{className:"rounded-full bg-primary/20 px-2 py-0.5 text-xs font-medium text-primary",children:"Active"}),!e.active&&t.jsx("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs font-medium text-muted-foreground",children:"Inactive"}),e.end_date&&t.jsxs(i,{type:"button",variant:"outline",size:"sm",className:"h-6 rounded-full px-2 text-[11px]",children:[e.active?"Ending on":"Ended on"," ",new Date(e.end_date).toLocaleDateString()]})]}),t.jsx("p",{className:"mt-2 text-sm leading-relaxed text-muted-foreground",children:e.description}),t.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[t.jsxs("span",{className:"flex items-center gap-1 text-sm font-medium text-foreground",children:[t.jsx(f,{className:"h-4 w-4"})," Goal: ",typeof e.goal_pkr=="number"?`PKR ${e.goal_pkr}`:e.goal]}),e.active&&t.jsxs("div",{className:"flex items-center gap-2",children:[e.product_id&&t.jsx(i,{asChild:!0,size:"sm",className:"rounded-full",children:t.jsx(l,{to:`/product/${e.product_id}`,children:d.get(e.product_id)?`Buy: ${d.get(e.product_id)}`:"Buy for fundraiser"})}),t.jsx(i,{asChild:!0,size:"sm",className:"rounded-full",children:t.jsx(l,{to:`/fundraiser/${e.id}`,children:"Participate"})})]})]})]})]})})},e.id))})]})})})};export{L as default};
