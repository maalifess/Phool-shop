import{r as j,j as e}from"./index-CmlESUcm.js";import{L as x,B as g}from"./Layout-By9ieHzg.js";import{I as n}from"./input-DNWv7wvj.js";import{T as b,S as N,a as _,b as v,c as C,d as p}from"./select-CjBndNow.js";import{L as r,s as w}from"./send-Dp5K5cei.js";import{C as O,b as T,c as k,a as I}from"./card-D36xzxRZ.js";import{m as u}from"./proxy-ChUYMSK1.js";import{C as R}from"./circle-check-BopdKK48.js";import{S as q}from"./sparkles-BnKusJwE.js";import"./check-gKK55StB.js";const h="https://script.google.com/macros/s/YOUR_PRODUCTION_SCRIPT_ID/exec",X=async s=>{var i,c,a;try{console.log("ðŸš€ Starting Google Sheets submission..."),console.log("ðŸ“‹ Order data:",s),console.log("ðŸ”— API URL:",h);const t={timestamp:new Date().toISOString(),orderType:s.orderType,name:s.name,email:s.email,phone:s.phone,address:s.address||"",products:s.products,quantity:s.quantity,paymentMethod:s.paymentMethod||"",notes:s.notes||"",status:s.status||"Under Process",customDescription:((i=s.customDetails)==null?void 0:i.description)||"",customColors:((c=s.customDetails)==null?void 0:c.colors)||"",customTimeline:((a=s.customDetails)==null?void 0:a.timeline)||""};console.log("ðŸ“¤ Row data prepared:",t);const o=JSON.parse(localStorage.getItem("phool_orders_backup")||"[]");if(o.push(t),localStorage.setItem("phool_orders_backup",JSON.stringify(o)),console.log("ðŸ’¾ Data saved to localStorage as backup"),h!=="https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec"){console.log("ðŸŒ Sending to Google Sheets...");try{const m=await fetch(h,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});console.log("ðŸ“¡ Request sent (no-cors mode)"),console.log("âœ… Google Sheets request completed (response unreadable due to CORS)")}catch(m){return console.warn("âŒ Google Sheets fetch failed:",m),console.warn("ðŸ“Š Data saved locally instead"),!1}}return console.log("ðŸŽ‰ Order data saved successfully"),!0}catch(d){console.error("ðŸ’¥ Error adding order to Google Sheet:",d);const t=JSON.parse(localStorage.getItem("phool_orders_backup")||"[]");return t.push({...s,timestamp:new Date().toISOString(),status:s.status||"Under Process",error:"Failed to sync to Google Sheets"}),localStorage.setItem("phool_orders_backup",JSON.stringify(t)),!1}},M=()=>{const[s,i]=j.useState(!1),c=async a=>{a.preventDefault();const d=a.target,t=new FormData(d),o={name:String(t.get("name")||""),email:String(t.get("email")||""),phone:String(t.get("phone")||""),products:"Custom Order Request",quantity:"1",notes:String(t.get("timeline")||""),paymentMethod:"To be discussed",orderType:"custom",customDetails:{description:String(t.get("description")||""),colors:String(t.get("colors")||""),timeline:String(t.get("timeline")||"")}},m={...o,...o.customDetails,order_summary:`Custom Order: ${o.customDetails.description}`,total_amount:"To be quoted",timestamp:new Date().toLocaleString(),payment_details:"To be discussed with customer",custom_request:!0},y="your_production_service_id",f="your_production_template_id",S="your_production_public_key";try{await w(y,f,m,S),console.log("Custom order email sent successfully")}catch(l){console.error("Email send failed:",l)}try{const l=await X(o);console.log(l?"Custom order added to Google Sheets successfully":"Custom order saved to local storage (Google Sheets not configured)")}catch(l){console.error("Google Sheets integration failed:",l)}i(!0)};return s?e.jsx(x,{children:e.jsx("section",{className:"flex min-h-[60vh] items-center justify-center py-16",children:e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx(R,{className:"mx-auto h-16 w-16 text-primary"}),e.jsx("h2",{className:"mt-6 font-display text-3xl font-bold text-foreground",children:"Request Submitted!"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"We'll get back to you within 2â€“3 business days. Please send a proof of payment screenshot to WhatsApp on 0333-XXXXXXX."}),e.jsx(g,{className:"mt-8 rounded-full px-8",onClick:()=>i(!1),children:"Submit Another Request"})]})})}):e.jsx(x,{children:e.jsx("section",{className:"py-16 md:py-24",children:e.jsxs("div",{className:"container max-w-2xl",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[e.jsx(q,{className:"mx-auto h-10 w-10 text-primary"}),e.jsx("h1",{className:"mt-4 font-display text-4xl font-bold text-foreground md:text-5xl",children:"Custom Orders"}),e.jsx("p",{className:"mx-auto mt-4 max-w-md text-muted-foreground",children:"Have something specific in mind? Tell us about your dream crochet piece and we'll bring it to life."})]}),e.jsx(u.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs(O,{className:"mt-12 border-border/40",children:[e.jsx(T,{children:e.jsx(k,{className:"font-display text-xl",children:"Request Form"})}),e.jsx(I,{children:e.jsxs("form",{onSubmit:c,className:"space-y-5",children:[e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",children:"Your Name"}),e.jsx(n,{id:"name",placeholder:"Jane Doe",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"email",placeholder:"jane@email.com",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"phone",children:"Phone or WhatsApp (optional)"}),e.jsx(n,{id:"phone",name:"phone",placeholder:"03XX-XXX-XXXX (WhatsApp preferred)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",children:"What would you like made?"}),e.jsx(b,{id:"description",name:"description",placeholder:"Describe the item: type (toy, blanket), size, special requests, and any inspiration links",rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"colors",children:"Preferred Colors"}),e.jsx(n,{id:"colors",name:"colors",placeholder:"e.g., pastel pink, sage green, cream (optional)"})]}),e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Timeline"}),e.jsxs(N,{children:[e.jsx(_,{children:e.jsx(v,{placeholder:"When do you need it?"})}),e.jsxs(C,{children:[e.jsx(p,{value:"no-rush",children:"No rush"}),e.jsx(p,{value:"2-weeks",children:"Within 2 weeks"}),e.jsx(p,{value:"1-month",children:"Within 1 month"}),e.jsx(p,{value:"specific",children:"Specific date (mention below)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"timeline",children:"Preferred pickup/delivery note (optional)"}),e.jsx(n,{id:"timeline",name:"timeline",placeholder:"e.g., Ready by 10 Mar, or Pickup only"})]})]}),e.jsx(g,{type:"submit",size:"lg",className:"w-full rounded-full",children:"Submit Request"})]})})]})})]})})})};export{M as default};
