import{u as A,r as o,j as e,X as B,L as E}from"./index-BpkvZjkd.js";import{l as $,a as z,L as O,S as M,B as x}from"./Layout-CUxFosHG.js";import{C as W,a as q}from"./card-BCNS5OHr.js";import{m as p}from"./proxy-BppZayHj.js";import{S as D}from"./shopping-bag-C39JhtyT.js";const H={hidden:{opacity:0,y:20},visible:f=>({opacity:1,y:0,transition:{delay:f*.08,duration:.5,ease:"easeOut"}})},K=()=>{const[f,N]=A(),h=f.get("search")||"",[l,g]=o.useState("All"),[i,b]=o.useState("default"),[c,w]=o.useState([]),[d,C]=o.useState([]),[j,y]=o.useState(!0),[n,m]=o.useState(h);o.useEffect(()=>{m(h)},[h]);const S=t=>!t||t.trim()===""?!1:t.startsWith("data:image/")||t.startsWith("http://")||t.startsWith("https://"),k=o.useMemo(()=>{const t=new Set;for(const s of c)s.category.split(",").map(r=>r.trim()).filter(Boolean).forEach(r=>t.add(r));for(const s of d)t.add(s.category);return["All",...Array.from(t)]},[c,d]),v=o.useMemo(()=>{const t=[];for(const s of c)t.push(s);for(const s of d)t.push({...s,images:s.images});return t},[c,d]);o.useEffect(()=>{(async()=>{y(!0);const[t,s]=await Promise.all([$(),z()]);w(t),C(s),y(!1)})()},[]);const u=o.useMemo(()=>{let t=[...v];const s=n.toLowerCase().trim();return s&&(t=t.filter(a=>a.name.toLowerCase().includes(s)||(a.description||"").toLowerCase().includes(s)||a.category.toLowerCase().includes(s))),l!=="All"&&(t=t.filter(a=>a.category.split(",").map(P=>P.trim()).filter(Boolean).includes(l))),i==="price-asc"?t.sort((a,r)=>a.price-r.price):i==="price-desc"?t.sort((a,r)=>r.price-a.price):i==="name-asc"&&t.sort((a,r)=>a.name.localeCompare(r.name)),t},[v,n,l,i]),L=()=>{m(""),N({})};return e.jsx(O,{children:e.jsx("section",{className:"py-16 md:py-24",children:e.jsxs("div",{className:"container",children:[e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[e.jsx("h1",{className:"font-display text-4xl font-bold text-foreground md:text-5xl",children:"Our Catalog"}),e.jsx("p",{className:"mx-auto mt-4 max-w-lg text-muted-foreground",children:"Browse our handcrafted collection â€” each piece made with care."})]}),e.jsx("div",{className:"mx-auto mt-8 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx("input",{value:n,onChange:t=>m(t.target.value),placeholder:"Search by name, description, or category...",className:"h-11 w-full rounded-full border border-border/60 bg-background pl-10 pr-10 text-sm outline-none focus:border-primary focus:ring-1 focus:ring-primary/30"}),n&&e.jsx("button",{onClick:L,className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:e.jsx(B,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-3",children:k.map(t=>e.jsx(x,{variant:l===t?"default":"outline",size:"sm",className:"rounded-full",onClick:()=>g(t),children:t},t))}),e.jsx("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-3",children:e.jsxs("select",{value:i,onChange:t=>b(t.target.value),className:"rounded-md border bg-background px-3 py-2 text-sm",children:[e.jsx("option",{value:"default",children:"Sort"}),e.jsx("option",{value:"price-asc",children:"Price: Low to High"}),e.jsx("option",{value:"price-desc",children:"Price: High to Low"}),e.jsx("option",{value:"name-asc",children:"Name: A-Z"})]})}),e.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:j?"Loading...":`${u.length} item${u.length!==1?"s":""} found`}),e.jsx(p.div,{initial:"hidden",animate:"visible",className:"mt-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:u.map((t,s)=>e.jsx(p.div,{variants:H,custom:s,children:e.jsx(W,{className:"group h-full border-border/40 transition-all duration-300 hover:-translate-y-1 hover:shadow-lg",children:e.jsxs(q,{className:"flex h-full flex-col p-6 text-center",children:[e.jsxs("div",{className:"relative mx-auto aspect-square w-full overflow-hidden rounded-2xl border border-border/40",children:[(()=>{const a=t.images.find(r=>(r||"").trim()!=="")||"";return S(a)?e.jsx("img",{src:a,alt:t.name,className:"absolute inset-0 h-full w-full object-cover",loading:"lazy",decoding:"async"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-accent text-sm text-muted-foreground",children:"No image"})})(),e.jsx("div",{className:"absolute inset-0 translate-y-full bg-pink-500/20 transition-transform duration-300 ease-out group-hover:translate-y-0"}),!t.in_stock&&e.jsx("div",{className:"absolute top-2 left-2 rounded-full bg-red-500/90 px-2.5 py-0.5 text-xs font-semibold text-white",children:"Out of Stock"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-200 group-hover:opacity-100",children:t.in_stock?e.jsx(x,{asChild:!0,size:"sm",className:"rounded-full",children:e.jsxs(E,{to:`/product/${t.id}`,children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," View"]})}):e.jsx(x,{size:"sm",disabled:!0,className:"rounded-full",children:"Out of Stock"})})]}),e.jsxs("div",{className:"mt-4 flex items-end justify-between gap-3 text-left",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-display text-sm font-semibold text-foreground line-clamp-1",children:t.name}),e.jsx("div",{className:"mt-0.5 flex flex-wrap gap-1",children:t.category.split(",").map((a,r)=>e.jsx("span",{className:"inline-block rounded-full bg-muted px-2 py-0.5 text-xs text-muted-foreground",children:a.trim()},r))})]}),e.jsxs("div",{className:"shrink-0 text-lg font-medium text-primary",children:["PKR ",t.price]})]})]})})},t.id))},`${l}-${n}`),!j&&u.length===0&&e.jsxs("div",{className:"mt-16 text-center text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No products match your filters."}),e.jsx(x,{variant:"outline",className:"mt-4 rounded-full",onClick:()=>{g("All"),m("")},children:"Clear all filters"})]})]})})})};export{K as default};
