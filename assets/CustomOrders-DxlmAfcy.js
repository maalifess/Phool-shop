import{r as b,j as e,L as q}from"./index-DEN97tru.js";import{L as _,B as d}from"./Layout-BmqPV_Uj.js";import{I as i}from"./input-CTLdy9UI.js";import{T,S as k,a as O,b as I,c as R,d as c}from"./select-BtiMMF0y.js";import{L as r,s as S,a as X}from"./googleSheets-BVG2BcWv.js";import{C as E,b as F,c as P,a as A}from"./card-CuyMdiqB.js";import{c as L}from"./supabaseOrders-DiTNrRwi.js";import{m as u}from"./proxy-BTE9RqdT.js";import{C as W}from"./circle-check-DcfYCcLw.js";import{S as G}from"./sparkles-CB2SR-02.js";import"./check-CfO7Y2Wh.js";const Z=()=>{const[v,p]=b.useState(!1),[a,N]=b.useState(""),C=async h=>{h.preventDefault();const w=h.target,o=new FormData(w),s={name:String(o.get("name")||""),email:String(o.get("email")||""),phone:String(o.get("phone")||""),products:"Custom Order Request",quantity:"1",notes:String(o.get("timeline")||""),paymentMethod:"To be discussed",orderType:"custom",customDetails:{description:String(o.get("description")||""),colors:String(o.get("colors")||""),timeline:String(o.get("timeline")||"")}},m=`CUSTOM-${Date.now()}`;try{await L({order_id:m,name:s.name,email:s.email,phone:s.phone,address:"",products:"Custom Order Request",quantity:"1",payment_method:"To be discussed",notes:[s.customDetails.timeline?`Timeline: ${s.customDetails.timeline}`:""].filter(Boolean).join(`
`),order_type:"custom",status:"Quote Request",items:[],subtotal:0,discount:0,total:0,promo_code:null,gift_wrap:!1,gift_wrap_cost:0,gift_message:"",custom_description:s.customDetails.description,custom_colors:s.customDetails.colors,custom_timeline:s.customDetails.timeline})}catch(t){console.error("Supabase custom order save failed:",t)}const x={order_id:m,name:s.name,email:s.email,phone:s.phone,order_summary:`Custom Order: ${s.customDetails.description}`,total_amount:"To be quoted",payment_method:"To be discussed",payment_details:"To be discussed with customer",order_type:"custom",status:"Quote Request",timestamp:new Date().toLocaleString(),delivery_note:"Delivery timeline to be discussed based on custom order requirements",contact_email:"phoolshopstore@gmail.com",contact_phone:"0321-000-0000",custom_description:s.customDetails.description,custom_colors:s.customDetails.colors,custom_timeline:s.customDetails.timeline,customer_notes:s.customDetails.timeline,special_instructions:`Custom order - ${s.customDetails.description}`,custom_request:!0},l="service_brnw0i8",y="template_2dcx5j8",f="template_fv80qjn",n="HreDhBGbIaA61OpR-";if(l.includes("YOUR_")||n.includes("YOUR_"))console.error("âŒ EMAILJS NOT CONFIGURED: Missing EmailJS environment variables"),console.error("ðŸ“§ Custom order emails NOT sent. To fix: set VITE_EMAILJS_* env vars in .env and rebuild");else try{const t={...x,to_email:"phoolshopstore@gmail.com",to_name:"Phool Shop Admin",recipient_type:"admin"},j=await S(l,y,t,n);console.log("âœ… Admin email sent successfully!",j.status,j.text);const D={...x,to_email:s.email,to_name:s.name,shop_name:"Phool Shop",thank_you_message:"Thank you for your custom order request! We will review your requirements and get back to you within 2-3 business days with a quote and timeline.",recipient_type:"customer"},g=await S(l,f,D,n);console.log("âœ… Customer email sent successfully!",g.status,g.text)}catch(t){console.error("âŒ Custom order email send failed:",t),console.error("ðŸ” Full error details:",JSON.stringify(t,null,2)),console.error("ðŸ“§ EmailJS Config:",{serviceId:l,templateId:y,customerTemplateId:f,publicKey:n.substring(0,10)+"..."})}try{const t=await X(s);console.log(t?"Custom order added to Google Sheets successfully":"Custom order saved to local storage (Google Sheets not configured)")}catch(t){console.error("Google Sheets integration failed:",t)}N(m),p(!0)};return v?e.jsx(_,{children:e.jsx("section",{className:"flex min-h-[60vh] items-center justify-center py-16",children:e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx(W,{className:"mx-auto h-16 w-16 text-primary"}),e.jsx("h2",{className:"mt-6 font-display text-3xl font-bold text-foreground",children:"Request Submitted!"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"We'll get back to you within 2â€“3 business days. Please send a proof of payment screenshot to WhatsApp on 0333-XXXXXXX."}),a&&e.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Your Custom Order ID:"}),e.jsx("p",{className:"font-mono font-bold text-primary",children:a}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Save this ID to track your custom order"})]}),e.jsxs("div",{className:"mt-6 flex flex-col items-center gap-3",children:[e.jsx(d,{className:"rounded-full px-8",onClick:()=>p(!1),children:"Submit Another Request"}),a&&e.jsx(d,{asChild:!0,variant:"outline",className:"rounded-full px-8",children:e.jsx(q,{to:`/track-order?order=${a}`,children:"Track Your Request"})})]})]})})}):e.jsx(_,{children:e.jsx("section",{className:"py-16 md:py-24",children:e.jsxs("div",{className:"container max-w-2xl",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[e.jsx(G,{className:"mx-auto h-10 w-10 text-primary"}),e.jsx("h1",{className:"mt-4 font-display text-4xl font-bold text-foreground md:text-5xl",children:"Custom Orders"}),e.jsx("p",{className:"mx-auto mt-4 max-w-md text-muted-foreground",children:"Have something specific in mind? Tell us about your dream crochet piece and we'll bring it to life."})]}),e.jsx(u.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs(E,{className:"mt-12 border-border/40",children:[e.jsx(F,{children:e.jsx(P,{className:"font-display text-xl",children:"Request Form"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",children:"Your Name"}),e.jsx(i,{id:"name",name:"name",placeholder:"Jane Doe",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",name:"email",type:"email",placeholder:"jane@email.com",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"phone",children:"Phone or WhatsApp (optional)"}),e.jsx(i,{id:"phone",name:"phone",placeholder:"03XX-XXX-XXXX (WhatsApp preferred)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",children:"What would you like made?"}),e.jsx(T,{id:"description",name:"description",placeholder:"Describe the item: type (toy, blanket), size, special requests, and any inspiration links",rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"colors",children:"Preferred Colors"}),e.jsx(i,{id:"colors",name:"colors",placeholder:"e.g., pastel pink, sage green, cream (optional)"})]}),e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Timeline"}),e.jsxs(k,{children:[e.jsx(O,{children:e.jsx(I,{placeholder:"When do you need it?"})}),e.jsxs(R,{children:[e.jsx(c,{value:"no-rush",children:"No rush"}),e.jsx(c,{value:"2-weeks",children:"Within 2 weeks"}),e.jsx(c,{value:"1-month",children:"Within 1 month"}),e.jsx(c,{value:"specific",children:"Specific date (mention below)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"timeline",children:"Preferred pickup/delivery note (optional)"}),e.jsx(i,{id:"timeline",name:"timeline",placeholder:"e.g., Ready by 10 Mar, or Pickup only"})]})]}),e.jsx(d,{type:"submit",size:"lg",className:"w-full rounded-full",children:"Submit Request"})]})})]})})]})})})};export{Z as default};
