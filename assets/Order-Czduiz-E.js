import{c as ae,r as c,b as re,j as e,L as oe}from"./index-BJVcLQkI.js";import{L as F,B as S}from"./Layout-CyIJqsHY.js";import{I as j}from"./input-C-nPZwdY.js";import{T as _,S as ne,a as ie,b as le,c as de,d as D}from"./select-D9xMnVKf.js";import{L as l,a as ce,s as J}from"./googleSheets-B_oY_ivY.js";import{C as me,b as pe,c as ue,a as xe}from"./card-CP5jr9YZ.js";import{c as he}from"./supabaseOrders-DHKcV3kW.js";import{m as o}from"./proxy-Bql92ham.js";import{C as ye}from"./circle-check-CW_c_UEt.js";import{C as K}from"./check-DHaH4NTA.js";import{C as ge}from"./copy-CBRRJkxE.js";import{S as fe}from"./shopping-bag-7DHldQSi.js";import{G as je}from"./gift-CSyvf9hj.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=ae("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),G={PHOOL10:{discount:10,type:"percent",label:"10% off"},PHOOL20:{discount:20,type:"percent",label:"20% off"},SAVE100:{discount:100,type:"fixed",label:"PKR 100 off"},WELCOME:{discount:15,type:"percent",label:"15% off (Welcome)"}},O=50,be=()=>{const I="PS",N=Date.now().toString(36).toUpperCase(),p=Math.random().toString(36).substring(2,6).toUpperCase();return`${I}-${N}-${p}`},Le=()=>{var R;const[I,N]=c.useState(!1),[p,U]=c.useState(""),[W,w]=c.useState(!1),z=re(),[u,B]=c.useState(void 0),[M,A]=c.useState(""),[n,P]=c.useState(null),[k,b]=c.useState(""),[m,V]=c.useState(!1),[g,Y]=c.useState("");let r=(R=z.state)==null?void 0:R.items;if(!r||r.length===0)try{const s=localStorage.getItem("phool_cart_v1");s&&(r=JSON.parse(s))}catch{r=void 0}const X=r&&r.length>0?r.map(s=>`${s.quantity}x ${s.name} (PKR ${s.price})${s.customText?` â€” Message: ${s.customText}`:""}`).join(`
`):void 0,f=r?r.reduce((s,v)=>s+v.price*v.quantity,0):0,i=n?G[n]:null,x=i?i.type==="percent"?Math.round(f*i.discount/100):i.discount:0,C=m?O:0,E=Math.max(0,f-x+C),H=()=>{const s=M.trim().toUpperCase();s&&(G[s]?(P(s),b("")):(b("Invalid promo code"),P(null)))},Q=()=>{P(null),A(""),b("")},Z=async()=>{try{await navigator.clipboard.writeText(p),w(!0),setTimeout(()=>w(!1),2e3)}catch{}},ee=async s=>{s.preventDefault();const v=s.target,d=new FormData(v),T=be(),t={name:String(d.get("name")||""),email:String(d.get("email")||""),phone:String(d.get("phone")||""),quantity:String(d.get("quantity")||""),address:String(d.get("address")||""),products:String(d.get("products")||""),notes:String(d.get("notes")||"")+(m?`
[GIFT WRAP] Message: ${g||"No message"}`:"")+(n?`
[PROMO: ${n} â€” ${i==null?void 0:i.label}]`:""),paymentMethod:u||"",orderType:"regular"},L={order_id:T,name:t.name,email:t.email,phone:t.phone,address:t.address||"",order_summary:r?r.map(a=>`${a.quantity}x ${a.name} - PKR ${a.price}${a.customText?` (Message: ${a.customText})`:""}`).join(`
`):t.products,total_amount:E,subtotal:f,discount:x>0?`PKR ${x} (${n})`:"None",promo_code:n||"None",gift_wrap:m?"Yes":"No",gift_wrap_cost:C,gift_message:g||"No message",payment_method:u||"Not selected",payment_details:u==="jazzcash"?"JazzCash: 0321-000-0000 (Phool Shop)":u==="bank"?"Bank: Example Bank, IBAN: PK00EXAM00000000000000 (Phool Shop)":"Not selected",order_type:"regular",status:"Under Process",items_count:r?r.length:1,timestamp:new Date().toLocaleString(),delivery_note:"Free delivery - We will contact you to arrange delivery details",contact_email:"phoolshopstore@gmail.com",contact_phone:"0321-000-0000",customer_notes:String(d.get("notes")||""),special_instructions:m?`Gift wrap requested: ${g||"No message"}`:"No special instructions"},h="service_brnw0i8",q="template_2dcx5j8",$="template_fv80qjn",y="HreDhBGbIaA61OpR-";try{await he({order_id:T,name:t.name,email:t.email,phone:t.phone,address:t.address||"",products:t.products,quantity:t.quantity,payment_method:t.paymentMethod||"",notes:String(d.get("notes")||""),order_type:t.orderType,status:"Under Process",items:r||[],subtotal:f,discount:x,total:E,promo_code:n,gift_wrap:m,gift_wrap_cost:C,gift_message:g,custom_description:"",custom_colors:"",custom_timeline:""})}catch(a){console.error("Supabase order save failed:",a)}U(T),N(!0),ce({name:t.name,email:t.email,phone:t.phone,address:t.address||"",products:t.products,quantity:t.quantity,notes:t.notes,paymentMethod:t.paymentMethod||"",orderType:"regular",status:"Under Process"}).catch(a=>{console.error("Google Sheets integration failed:",a)});const se={...L,to_email:"phoolshopstore@gmail.com",to_name:"Phool Shop Admin",recipient_type:"admin"};h.includes("YOUR_")||y.includes("YOUR_")?(console.error("âŒ EMAILJS NOT CONFIGURED: Missing VITE_EMAILJS_SERVICE_ID, VITE_EMAILJS_TEMPLATE_ID, or VITE_EMAILJS_PUBLIC_KEY"),console.error("ðŸ“§ Admin email NOT sent. To fix: set EmailJS env vars in .env and rebuild")):J(h,q,se,y).then(a=>{console.log("âœ… Admin email sent successfully!",a.status,a.text)}).catch(a=>{console.error("âŒ Admin email send failed:",a),console.error("ðŸ” Full error details:",JSON.stringify(a,null,2)),console.error("ðŸ“§ EmailJS Config:",{serviceId:h,templateId:q,publicKey:y.substring(0,10)+"..."})});const te={...L,to_email:t.email,to_name:t.name,shop_name:"Phool Shop",thank_you_message:"Thank you for your order! We will process it as soon as possible and contact you with delivery details.",recipient_type:"customer"};h.includes("YOUR_")||y.includes("YOUR_")?(console.error("âŒ EMAILJS NOT CONFIGURED: Missing VITE_EMAILJS_SERVICE_ID, VITE_EMAILJS_CUSTOMER_TEMPLATE_ID, or VITE_EMAILJS_PUBLIC_KEY"),console.error("ðŸ“§ Customer email NOT sent. To fix: set EmailJS env vars in .env and rebuild")):J(h,$,te,y).then(a=>{console.log("âœ… Customer email sent successfully!",a.status,a.text)}).catch(a=>{console.error("âŒ Customer email send failed:",a),console.error("ðŸ” Full error details:",JSON.stringify(a,null,2)),console.error("ðŸ“§ Customer EmailJS Config:",{serviceId:h,customerTemplateId:$,publicKey:y.substring(0,10)+"..."})})};return I?e.jsx(F,{children:e.jsx("section",{className:"flex min-h-[60vh] items-center justify-center py-16",children:e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"mx-auto max-w-md text-center",children:[e.jsx(o.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:12},children:e.jsx(ye,{className:"mx-auto h-20 w-20 text-primary"})}),e.jsx(o.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.15},className:"mt-6 font-display text-3xl font-bold text-foreground",children:"Order Placed!"}),p&&e.jsxs(o.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mt-4 rounded-xl border border-border/40 bg-accent/50 p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Your Order ID"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"font-mono text-lg font-bold text-foreground",children:p}),e.jsx("button",{onClick:Z,className:"rounded-md p-1 hover:bg-muted transition-colors",title:"Copy order ID",children:W?e.jsx(K,{className:"h-4 w-4 text-green-500"}):e.jsx(ge,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Save this ID to track your order"})]}),e.jsx(o.p,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.25},className:"mt-4 text-muted-foreground",children:"Thank you! Please send a proof of payment screenshot to WhatsApp on 0333-XXXXXXX."}),e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},className:"mt-6 flex justify-center gap-2 text-2xl",children:[e.jsx(o.span,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:"ðŸŽ‰"}),e.jsx(o.span,{initial:{y:-12,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:"âœ¨"}),e.jsx(o.span,{initial:{y:-8,opacity:0},animate:{y:0,opacity:1},transition:{delay:.45},children:"ðŸ’"})]}),e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-3",children:[e.jsx(S,{className:"rounded-full px-8",onClick:()=>N(!1),children:"Place Another Order"}),e.jsx(S,{asChild:!0,variant:"outline",className:"rounded-full px-8",children:e.jsx(oe,{to:`/track-order?order=${p}`,children:"Track Your Order"})})]})]})})}):e.jsx(F,{children:e.jsx("section",{className:"py-16 md:py-24",children:e.jsxs("div",{className:"container max-w-2xl",children:[e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[e.jsx(fe,{className:"mx-auto h-10 w-10 text-primary"}),e.jsx("h1",{className:"mt-4 font-display text-4xl font-bold text-foreground md:text-5xl",children:"Place an Order"}),e.jsx("p",{className:"mx-auto mt-4 max-w-md text-muted-foreground",children:"Fill in your details below. No online payment required â€” we'll reach out to confirm and arrange payment."})]}),r&&r.length>0&&e.jsxs("div",{className:"mt-6 rounded-lg border border-border/40 bg-accent/50 p-4",children:[e.jsx("h3",{className:"font-medium",children:"You're checking out:"}),e.jsx("ul",{className:"mt-2 list-inside list-disc text-sm text-muted-foreground",children:r.map(s=>e.jsxs("li",{children:[s.quantity," Ã— ",s.name," â€” PKR ",s.price,s.customText?` â€” Message: ${s.customText}`:""]},`${s.id}-${s.customText??""}`))})]}),e.jsx(o.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs(me,{className:"mt-12 border-border/40",children:[e.jsx(pe,{children:e.jsx(ue,{className:"font-display text-xl",children:"Order Details"})}),e.jsx(xe,{children:e.jsxs("form",{onSubmit:ee,className:"space-y-5",children:[e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Full Name"}),e.jsx(j,{id:"name",name:"name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(j,{id:"email",name:"email",type:"email",required:!0})]})]}),e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"phone",children:"Phone"}),e.jsx(j,{id:"phone",name:"phone",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"quantity",children:"Quantity"}),e.jsx(j,{id:"quantity",name:"quantity",type:"number",min:"1",defaultValue:"1",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"address",children:"Shipping Address"}),e.jsx(_,{id:"address",name:"address",rows:2,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"products",children:"Product(s) You'd Like to Order"}),e.jsx(_,{id:"products",name:"products",rows:3,defaultValue:X,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"notes",children:"Additional Notes (optional)"}),e.jsx(_,{id:"notes",name:"notes",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"payment",children:"Payment Method"}),e.jsxs(ne,{onValueChange:s=>B(s),children:[e.jsx(ie,{id:"payment",children:e.jsx(le,{placeholder:"Choose payment method"})}),e.jsxs(de,{children:[e.jsx(D,{value:"jazzcash",children:"JazzCash"}),e.jsx(D,{value:"bank",children:"Bank Transfer"})]})]}),u==="jazzcash"&&e.jsxs("div",{className:"mt-2 rounded-md border border-border/40 bg-muted/10 p-3 text-sm",children:[e.jsx("div",{className:"font-medium",children:"JazzCash Details"}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Number: ",e.jsx("strong",{children:"0321-000-0000"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Account Name: ",e.jsx("strong",{children:"Phool Shop"})]})]}),u==="bank"&&e.jsxs("div",{className:"mt-2 rounded-md border border-border/40 bg-muted/10 p-3 text-sm",children:[e.jsx("div",{className:"font-medium",children:"Bank Transfer Details"}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Bank: ",e.jsx("strong",{children:"Example Bank"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["IBAN: ",e.jsx("strong",{children:"PK00EXAM00000000000000"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Account Name: ",e.jsx("strong",{children:"Phool Shop"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-primary"})," Promo Code"]}),n?e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-green-200 bg-green-50 p-3 text-sm",children:[e.jsx(K,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium text-green-700",children:n}),e.jsxs("span",{className:"text-green-600",children:["â€” ",i==null?void 0:i.label]}),e.jsx("button",{type:"button",onClick:Q,className:"ml-auto text-red-500 hover:text-red-700 text-xs font-medium",children:"Remove"})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{placeholder:"Enter promo code",value:M,onChange:s=>{A(s.target.value),b("")}}),e.jsx(S,{type:"button",variant:"outline",onClick:H,className:"shrink-0",children:"Apply"})]}),k&&e.jsx("p",{className:"text-sm text-red-500",children:k})]}),e.jsxs("div",{className:"space-y-3 rounded-lg border border-border/40 p-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:s=>V(s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx(je,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium text-foreground",children:"Add Gift Wrapping"}),e.jsxs("span",{className:"ml-auto text-sm text-muted-foreground",children:["+ PKR ",O]})]}),m&&e.jsxs("div",{className:"space-y-2 pl-7",children:[e.jsx(l,{htmlFor:"giftMsg",children:"Gift Message (optional)"}),e.jsx(_,{id:"giftMsg",value:g,onChange:s=>Y(s.target.value),rows:2,placeholder:"Write a message for the recipient...",maxLength:200})]})]}),r&&r.length>0&&e.jsxs("div",{className:"rounded-lg border border-border/40 bg-accent/30 p-4 space-y-2 text-sm",children:[e.jsx("div",{className:"font-semibold text-foreground",children:"Order Summary"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{children:["PKR ",f]})]}),x>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Discount (",n,")"]}),e.jsxs("span",{children:["- PKR ",x]})]}),m&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Gift Wrapping"}),e.jsxs("span",{children:["PKR ",O]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Delivery"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Free"})]}),e.jsxs("div",{className:"border-t border-border/40 pt-2 flex justify-between font-bold text-foreground text-base",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-primary",children:["PKR ",E]})]})]}),e.jsxs("div",{className:"rounded-lg border border-border/60 bg-accent/50 p-4 text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Payment:"})," Send screenshot of proof of payment to email or phone below. We'll contact you to confirm and arrange delivery. There are no delivery charges â€” delivery is free.",e.jsxs("div",{className:"mt-3 space-y-1 text-sm",children:[e.jsxs("div",{children:["Email: ",e.jsx("strong",{children:"phoolshopstore@gmail.com"})]}),e.jsxs("div",{children:["Phone/WhatsApp: ",e.jsx("strong",{children:"0321-000-0000"})]})]})]}),e.jsx(S,{type:"submit",size:"lg",className:"w-full rounded-full",children:"Submit Order"})]})})]})})]})})})};export{Le as default};
