import{s as c}from"./supabase-C5sOXNJb.js";const i=6e4;let r=null,d=null;async function u(){const a=Date.now();if(r&&a-r.ts<i)return r.data;if(d)return d;d=(async()=>{const{data:t,error:e}=await c.from("cards").select("*").order("created_at",{ascending:!1});if(e)return console.error("Error loading cards:",e),(r==null?void 0:r.data)??[];const n=t||[];return r={ts:Date.now(),data:n},n})();try{return await d}finally{d=null}}async function f(a){if(!Number.isFinite(a))return null;if(r){const s=r.data.find(o=>o.id===a);if(s)return s}const{data:t,error:e}=await c.from("cards").select("*").eq("id",a).maybeSingle();if(e)return console.error("Error loading card:",e),null;if(!t)return null;const n=t;if(r){const s=r.data.findIndex(o=>o.id===a);if(s>=0){const o=[...r.data];o[s]=n,r={ts:r.ts,data:o}}}return n}async function g(a){const{data:t,error:e}=await c.from("cards").insert(a).select().single();return e?(console.error("Error creating card:",e),null):t}async function m(a,t){const{data:e,error:n}=await c.from("cards").update(t).eq("id",a).select().single();return n?(console.error("Error updating card:",n),null):e}async function y(a){const{error:t}=await c.from("cards").delete().eq("id",a);return t?(console.error("Error deleting card:",t),!1):!0}export{f as a,g as c,y as d,u as l,m as u};
